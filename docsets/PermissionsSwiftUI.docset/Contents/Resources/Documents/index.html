<!DOCTYPE html>
<html lang="en">
  <head>
    <title>PermissionsSwiftUI  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="PermissionsSwiftUI  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">PermissionsSwiftUI 1.4.3 Docs</a> (100% documented)</p>
        <p class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">PermissionsSwiftUI Reference</a>
        <img id="carat" src="img/carat.png" />
        PermissionsSwiftUI  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/Array.html">Array</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <p><span align="center">
  <br>
<img src="https://developer.apple.com/assets/elements/icons/swiftui/swiftui-96x96_2x.png" width="100">
  <br>
</span></p>
<h1 id='permissionsswiftui-a-swiftui-package-to-handle-permissions' class='heading'>PermissionsSwiftUI: A SwiftUI package to handle permissions</h1>

<p><img src="https://img.shields.io/github/workflow/status/jevonmao/PermissionsSwiftUI/Swift?label=CI%20Build"> <img src="https://img.shields.io/github/contributors/jevonmao/PermissionsSwiftUI"> <img src="https://img.shields.io/badge/License-MIT-blue.svg"> <img src="https://img.shields.io/github/issues/jevonmao/PermissionsSwiftUI?color=orange"> <img src="https://img.shields.io/github/commit-activity/w/jevonmao/PermissionsSwiftUI?color=yellowgreen&logoColor=yellowgreen"> <img src="https://camo.githubusercontent.com/86f8561418bbd6240d5c39dbf80b83a3dc1e85e69fe58da808f0168194dcc0d3/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f5377696674504d2d436f6d70617469626c652d627269676874677265656e2e737667"> <img src="https://img.shields.io/github/v/release/jevonmao/PermissionsSwiftUI?include_prereleases&style=plastic"></p>

<p><code>PermissionsSwiftUI</code> displays and handles permissions in SwiftUI. It is largely inspired by <a href="https://github.com/varabeis/SPPermissions">SPPermissions</a>.
The UI is highly customizable and resembles an <strong>Apple style</strong>. If you like the project, please <code>star ‚òÖ</code>. <br />
<br /></p>

<p align="center">
    <img src="https://github.com/jevonmao/PermissionsSwiftUI/blob/main/Resources/Main-screenshot.png?raw=true" style="display: block; margin: auto;"/>
</p>

<p align="center"> PermissionsSwiftUI looks equally gorgeous on both ‚òÄÔ∏èlight and üåë dark mode. </p>
<h2 id='navigation' class='heading'>üß≠ Navigation</h2>

<ul>
<li><a href="#-installation">Installation</a></li>
<li><p><a href="#-quickstart">Quickstart</a> 
<details></p>

<summary>Usage</summary></li>
<li><p><a href="#-usage">Usage</a></p>

<ul>
<li><a href="#customize-permission-texts">Customize Permission Texts</a></li>
<li><a href="#customize-header-texts">Customize header texts</a></li>
<li><a href="#onappear-and-ondisappear-override"><code>onAppear</code> and <code>onDisappear</code> Override</a></li>
<li><a href="#auto-check-authorization">Auto Check Authorization</a></li>
<li><a href="#auto-dismiss">Auto Dismiss</a></li>
<li><a href="#customize-colors">Customize Colors</a></li>
<li><a href="#restrict-dismissal">Restrict Dismissal</a></li>
<li><a href="#configuring-health-permissions">Configuring Health Permissions</a>
</details></li>
</ul></li>
<li><p><a href="#-cheatsheat">Cheatsheet</a></p></li>
<li><p><a href="#-supported-permissions">Supported Permissions</a></p></li>
<li><p><a href="#-contribute">Contribute</a></p></li>
</ul>

<details>
  <summary>Additional Information</summary>
  
-  [Additional Information](#additional-information)
    -  [Acknowledgement](#acknowledgement)
    -  [License](#license)
    
</details>
<h2 id='Ô∏è-installation' class='heading'>üñ•Ô∏è Installation</h2>
<h3 id='requirements' class='heading'>Requirements</h3>

<ul>
<li>iOS 11 (SwiftUI require iOS 13.0) or iPadOS 13</li>
<li>Xcode 12 and Swift 5.3</li>
<li>tvOS support coming soon</li>
<li>No MacOS, and WatchOS support for now</li>
</ul>
<h3 id='install' class='heading'>Install</h3>
<h4 id='swift-package-manager-recommended' class='heading'>Swift Package Manager (Recommended)</h4>

<p>You can install PermissionsSwiftUI into your Xcode project via SPM. 
To learn more about SPM, click <a href="https://swift.org/package-manager/">here</a></p>

<ol>
<li>In Xcode 12, open your project and navigate to <strong>File</strong> ‚Üí <strong>Swift Packages</strong> ‚Üí <strong>Add Package Dependency&hellip;</strong></li>
</ol>

<p>For Xcode 13, navigate to <strong>Files</strong> ‚Üí <strong>Add Package</strong></p>

<ol>
<li>Paste the repository URL (<code>https://github.com/jevonmao/PermissionsSwiftUI</code>) and click <strong>Next</strong>.</li>
<li>For <strong>Version</strong>, verify it&rsquo;s <strong>Up to next major</strong>.</li>
<li>Click <strong>Next</strong> and ONLY SELECT PERMISSIONS NEEDED else Apple will reject your app</li>
</ol>

<p>(You don&rsquo;t need to add CorePermissionsSwiftUI or PermissionsSwiftUI)</p>

<p><img width="716" alt="image" src="https://user-images.githubusercontent.com/64660730/121824314-313dea00-cc60-11eb-8553-40012b27f88e.png"></p>

<ol>
<li>Click <strong>Finish</strong></li>
<li>You are all set, thank you for using PermissionsSwiftUI!</li>
</ol>
<h4 id='cocoapods-deprecated' class='heading'>Cocoapods (Deprecated)</h4>

<p>You can also install PermissionsSwiftUI with Cocoapods. Add <code>pod &#39;PermissionsSwiftUI&#39;</code> in your podfile:</p>
<pre class="highlight plaintext"><code>platform :ios, '14.0'

target 'test abstract' do
  use_frameworks!
  pod 'PermissionsSwiftUI'

end
</code></pre>
<h2 id='quickstart' class='heading'>üöÄ Quickstart</h2>

<blockquote>
<p>Before you start, please <code>star ‚òÖ</code> this repository. Your star is my biggest motivation to pull all-nighters and maintain this open source project.</p>
</blockquote>
<h3 id='Ô∏è-v1-4-0-migration-guide' class='heading'>‚ö†Ô∏è v1.4.0 Migration Guide</h3>

<p><code>v1.4</code> is here! If you encounter any issues, please checkout the <a href="https://github.com/jevonmao/PermissionsSwiftUI/wiki/Migrating-to-v1.4.0">migration guide</a> designed to help developers resolve any deprecations and API updates.</p>
<h3 id='modal-style' class='heading'>Modal Style</h3>

<p>To use PermissionsSwiftUI, simply add the <code>JMModal</code> modifier to any view:</p>
<pre class="highlight plaintext"><code>.JMModal(showModal: $showModal, for: [.locationAlways, .photo, .microphone])`
</code></pre>

<p>Pass in a <code>Binding&lt;Bool&gt;</code> to show the modal view, and add whatever permissions you want to show. For example:</p>
<pre class="highlight plaintext"><code>   struct ContentView: View {
       @State var showModal = false
       var body: some View {
           Button(action: {
               showModal=true
           }, label: {
               Text("Ask user for permissions")
           })
           .JMModal(showModal: $showModal, for: [.locationAlways, .photo, .microphone])
       }
   }
</code></pre>
<h3 id='alert-style' class='heading'>Alert Style</h3>

<p><img src="https://github.com/jevonmao/PermissionsSwiftUI/blob/main/Resources/alert_view_screenshot.png?raw=true" height="300" align="left" />
The alert style is equally gorgeous, and allows for more versatile use. It is recommended when you have less than 3 permissions.  <br />
To show a permission pop up alert, use: </p>
<pre class="highlight plaintext"><code>.JMAlert(showModal: $showModal, for: [.locationAlways, .photo])
</code></pre>

<p>Similar to the previous <code>JMPermissions</code>, you need to pass in a <code>Binding&lt;Bool&gt;</code> to show the view, and add whatever permissions you want to show.
To quickly glance all of PermissionsSwiftUI&rsquo;s customization and configurations, checkout the <a href="#cheatsheat">cheatsheet</a>!
<br /> <br /> <br /> <br /> <br /> <br /></p>
<h2 id='Ô∏è-usage' class='heading'>üõ†Ô∏è Usage</h2>
<h3 id='customize-permission-texts' class='heading'>Customize Permission Texts</h3>

<p>To customize permission texts, use the modifier <code>setPermissionComponent()</code>
For example, you can change title, description, and image icon:</p>
<pre class="highlight plaintext"><code>.setPermissionComponent(for: .camera, 
                        image: AnyView(Image(systemName: "camera.fill")), 
                        title: "Camcorder",
                        description: "App needs to record videos")
</code></pre>

<p>and the result:</p>

<div style="text-align:center">
<img src="https://github.com/jevonmao/PermissionsSwiftUI/blob/main/Resources/Screenshot-camera.png" height="70">
</div>

<p><br />
Or only change 1 of title and description:</p>
<pre class="highlight plaintext"><code>setPermissionComponent(for: .tracking, title: "Trackers")
</code></pre>
<pre class="highlight plaintext"><code>setPermissionComponent(for: .tracking, description: "Tracking description")
</code></pre>

<p><strong>Note:</strong> </p>

<ul>
<li>The parameters you don&rsquo;t provide will show the default text</li>
<li>Add the <code>setPermissionComponent</code> modifier on your root level view, after <code>JMPermissions</code> modifier</li>
</ul>

<p>The <code>image</code> parameter accepts <strong>AnyView</strong>, so feel free to use <a href="https://developer.apple.com/design/human-interface-guidelines/sf-symbols/overview/">SF Symbols</a> or your custom asset:</p>
<pre class="highlight plaintext"><code>.setPermissionComponent(for: .camera, 
                        image: AnyView(Image("Your-cool-image"))
</code></pre>

<p>Even full SwiftUI views will worküò±:</p>
<pre class="highlight plaintext"><code>.setPermissionComponent(for: .camera, 
                        image: AnyView(YourCoolView())
</code></pre>

<p>You can use custom text and icon for all the supported permissions, with a single line of code.</p>
<h3 id='customize-header-texts' class='heading'>Customize Header Texts</h3>

<p>To customize the header title, use the modifier <code>changeHeaderTo</code>:
<img align="right" src="https://github.com/jevonmao/PermissionsSwiftUI/blob/main/Resources/Header%20annotation.png?raw=true" alt="Annotated for headers screen" height="400" /></p>
<pre class="highlight plaintext"><code>.JMPermissions(showModal: $showModal, for: [.camera, .location, .calendar])
.changeHeaderTo("App Permissions")
</code></pre>

<p>To customize the header description, use the modifier <code>changeHeaderDescriptionTo</code>:</p>
<pre class="highlight plaintext"><code>.JMPermissions(showModal: $showModal, for: [.camera, .location, .photo])
.changeHeaderDescriptionTo("Instagram need certain permissions in order for all the features to work.")
</code></pre>

<p>To customize the bottom description, use the modifier <code>changeBottomDescriptionTo</code>:</p>
<pre class="highlight plaintext"><code>.JMPermissions(showModal: $showModal, for: [.camera, .location, .photo])
.changeBottomDescriptionTo("If not allowed, you have to enable permissions in settings")
</code></pre>
<h3 id='code-onappear-code-and-code-ondisappear-code-override' class='heading'><code>onAppear</code> and <code>onDisappear</code> Override</h3>

<p>You might find it incredibly useful to execute your code, or perform some update action when a PermissionsSwiftUI view appears and disappears. <br />
You can perform some action when PermissionsSwiftUI view appears or disappears by:</p>
<pre class="highlight plaintext"><code>.JMPermissions(showModal: $showModal, for: [.locationAlways, .photo, .microphone], onAppear: {}, onDisappear: {})
</code></pre>

<p>The <code>onAppear</code> and <code>onDisappear</code> <strong>closure parameters will be executed</strong> everytime PermissionsSwiftUI view <strong>appears and disappears.</strong> <br />
The same view modifier closure for state changes are available for the <code>JMAlert</code> modifier:</p>
<pre class="highlight plaintext"><code>.JMAlert(showModal: $showModal,
                     for: [.locationAlways, .photo],
                     onAppear: {print("Appeared")},
                     onDisappear: {print("Disappeared")})
</code></pre>
<h3 id='auto-check-authorization' class='heading'>Auto Check Authorization</h3>

<p>PermissionsSwiftUI by default will automatically check for authorization status. It will only show permissions that are currently <code>notDetermined</code> status. (iOS system prevent developers from asking denied permissions. Allowed permissions will also be ignored by PermissionsSwiftUI). If all permissions are allowed or denied, PermissionsSwiftUI will not show the modal or alert at all.
To set auto check authorization, use the <code>autoCheckAuthorization</code> parameter:</p>
<pre class="highlight plaintext"><code>.JMModal(showModal: $showModal, for: [.camera], autoCheckAuthorization: false)
</code></pre>

<p>same applies for JMAlert</p>
<pre class="highlight plaintext"><code>.JMAlert(showModal: $showModal, for: [.camera], autoCheckAuthorization: false)
</code></pre>
<h3 id='auto-dismiss' class='heading'>Auto Dismiss</h3>

<p>PermissionsSwiftUI by default will not have any auto dimiss behavior. You can override this behaviour to make it automatically dismiss the modal or alert after user allows the last permission item. (All permissions must be ALLOWED, if any is DENIED, it will not auto dismiss).</p>
<pre class="highlight plaintext"><code>.JMModal(... autoDismiss: Bool) -&gt; some View
</code></pre>

<p>Pass in <code>true</code> or <code>false</code> to select whether to automatically dismiss the view.</p>
<h3 id='customize-colors' class='heading'>Customize Colors</h3>

<p>Using PermissionSwiftUI&rsquo;s capabilities, developers and designers can customize all the UI colors with incredible flexibility. You can fully configure all color at all states with your custom colors. <br />
To easily change the accent color:</p>
<pre class="highlight plaintext"><code>.setAccentColor(to: Color(.sRGB, red: 56/255, green: 173/255,
                                  blue: 169/255, opacity: 1))
</code></pre>

<p>To change the primary (default Apple blue) and tertiary (default Apple red) colors:</p>
<pre class="highlight plaintext"><code>.setAccentColor(toPrimary: Color(.sRGB, red: 56/255, green: 173/255,
                                  blue: 169/255, opacity: 1),
                toTertiary: Color(.systemPink))
</code></pre>

<p align="center">
    <img src="https://github.com/jevonmao/PermissionsSwiftUI/blob/main/Resources/Color-custom-screenshot.png?raw=true" height="250" style="display: block; margin: auto;"/>
</p>

<blockquote>
<p>‚ö†Ô∏è <code>.setAccentColor()</code> and <code>.setAllowButtonColor()</code> should never be used at the same time.</p>
</blockquote>

<p>To unleash the full customization of all button colors under all states, you need to pass in the <code>AllButtonColors</code> struct:</p>
<pre class="highlight plaintext"><code>.setAllowButtonColor(to: .init(buttonIdle: ButtonColor(foregroundColor: Color,
                                                               backgroundColor: Color),
                                       buttonAllowed: ButtonColor(foregroundColor: Color,
                                                                  backgroundColor: Color),
                                       buttonDenied: ButtonColor(foregroundColor: Color,
                                                                 backgroundColor: Color)))
</code></pre>

<p>For more information regarding the above method, reference the <a href="https://jevonmao.github.io/PermissionsSwiftUI/Structs/AllButtonColors.html">official documentation</a>.</p>
<h3 id='restrict-dismissal' class='heading'>Restrict Dismissal</h3>

<p>PermissionsSwiftUI will by default, prevent the user from dismissing the modal and alert, before all permissions have been interacted. This means if the user has not explictly denied or allowed EVERY permission shown, they will not be able to dismiss the PermissionsSwiftUI view. This restrict dismissal behavior can be overriden by the <code>var restrictModalDismissal: Bool</code> or <code>var restrictAlertDismissal: Bool</code> properties.
To disable the default restrict dismiss behavior:</p>
<pre class="highlight plaintext"><code>.JMModal(showModal: $show, for permissions: [.camera], restrictDismissal: false)
</code></pre>

<p>You can also configure with the model:</p>
<pre class="highlight plaintext"><code>let model: PermissionStore = {
        var model = PermissionStore()
        model.permissions = [.camera]
        model.restrictModalDismissal = false
        model.restrictAlertDismissal = false
        return model
    }
    ......

    .JMModal(showModal: $showModal, forModel: model)
</code></pre>
<h3 id='configuring-health-permissions' class='heading'>Configuring Health Permissions</h3>

<p>Unlike all the other permissions, the configuration for health permission is a little different. Because Apple require developers to explictly set read and write types, PermissionsSwiftUI greatly simplifies the process.</p>
<h4 id='code-hkaccess-code' class='heading'><code>HKAccess</code></h4>

<p>The structure HKAccess is required when initalizing health permission‚Äôs enum associated values. It encapsulates the read and write type permissions for the health permission.</p>

<p>To set read and write health types (<code>activeEnergyBurned</code> is used as example here):</p>
<pre class="highlight plaintext"><code>let healthTypes = Set([HKSampleType.quantityType(forIdentifier: .activeEnergyBurned)!])
.JMModal(showModal: $show, for: [.health(categories: .init(readAndWrite: healthTypes))])

//Same exact syntax for JMAlert styles
.JMAlert(showModal: $show, for: [.health(categories: .init(readAndWrite: healthTypes))])

</code></pre>

<p>To set read or write individually:</p>
<pre class="highlight plaintext"><code>let readTypes = Set([HKSampleType.quantityType(forIdentifier: .activeEnergyBurned)!])
let writeTypes = Set([HKSampleType.quantityType(forIdentifier: .appleStandTime)!])
.JMModal(showModal: $showModal, for: [.health(categories: .init(read: readTypes, write: writeTypes))])
</code></pre>

<p>You may also set only read or write type:</p>
<pre class="highlight plaintext"><code>let readTypes = Set([HKSampleType.quantityType(forIdentifier: .activeEnergyBurned)!])
.JMModal(showModal: $showModal, for: [.health(categories: .init(read: readTypes))])

</code></pre>
<h2 id='cheatsheat' class='heading'>üìñ Cheatsheat</h2>
<h3 id='modifiers' class='heading'>Modifiers</h3>

<p><strong>Customize overall accent color:</strong></p>
<pre class="highlight plaintext"><code>setAccentColor(to:)
setAccentColor(toPrimary:toTertiary:)
</code></pre>

<p><strong>Customize title:</strong></p>
<pre class="highlight plaintext"><code>changeHeaderTo(_:)
</code></pre>

<p><strong>Customize top description:</strong></p>
<pre class="highlight plaintext"><code>changeHeaderDescriptionTo(_:)
</code></pre>

<p><strong>Customize bottom description:</strong></p>
<pre class="highlight plaintext"><code>changeBottomDescriptionTo(_:)
</code></pre>

<p><strong>Customize each permission&rsquo;s displayed text &amp; image:</strong></p>
<pre class="highlight plaintext"><code>setPermissionComponent(for:image:title:description:)

setPermissionComponent(for:title:)

setPermissionComponent(for:description:)
</code></pre>

<p><strong>Customize <code>allow</code> button&rsquo;s colors:</strong></p>
<pre class="highlight plaintext"><code>setAllowButtonColor(to:)
</code></pre>

<p><strong>Automatically dismiss after last</strong></p>
<pre class="highlight plaintext"><code>autoDismiss: Bool
</code></pre>
<h3 id='parameters-of-code-jmmodal-code-and-code-jmalert-code' class='heading'>Parameters of <code>JMModal</code> and <code>JMAlert</code></h3>

<p><strong>Check authorization before showing modal or alert</strong></p>
<pre class="highlight plaintext"><code>autoCheckAuthorization: Bool
</code></pre>

<p><strong>Prevent dismissing before all permissions interacted</strong></p>
<pre class="highlight plaintext"><code>restrictDismissal: Bool
</code></pre>

<p><strong>Do something right before view appear</strong></p>
<pre class="highlight plaintext"><code>onAppear: () -&gt; Void
</code></pre>

<p><strong>Do something right before view disappear</strong></p>
<pre class="highlight plaintext"><code>onDisappear: (() -&gt; Void
</code></pre>
<h2 id='supported-permissions' class='heading'>üß∞ Supported Permissions</h2>

<p>Here is a list of all the permissions PermissionsSwiftUI supports. Yup, even the newest <code>tracking</code> permission for iOS 14 so you can stay on top of your game. All permissions in PermissionsSwiftUI come with a default name, description, and a stunning Apple native SF Symbols icon.</p>

<p>Support for FaceID permission is work in progress and coming soon! If you don&rsquo;t find a permission you need, open an issue. Even better, build it yourself and open a pull request, you can follow <a href="docs/New_Permission_Guide.md">this</a> step-by-step guide on adding new permissions.
<br /> <br /> <br />
<img align="center" src="https://github.com/jevonmao/PermissionsSwiftUI/blob/main/Resources/All-permissions-card-new.png" alt="A card of all the permissions" width="100%"></p>
<h2 id='contribute' class='heading'>üí™ Contribute</h2>

<p>Contributions are welcome here for coders and non-coders alike. No matter what your skill level is, you can for certain contribute to PermissionSwiftUI&rsquo;s open source community. Please read <a href="CONTRIBUTING.md">contributing.md</a> before starting, and if you are looking to contributing a new type of iOS permission, be sure to read this step-by-step <a href="docs/New_Permission_Guide.md">guide</a>.</p>

<p><strong>If you encounter ANY issue, have ANY concerns, or ANY comments, please do NOT hesitate to let me know. Open a discussion, issue, or email me.</strong> As a developer, I feel you when you don&rsquo;t understand something in the codebase. I try to comment and document as best as I can, but if you happen to encounter any issues, I will be happy to assist in any way I can.</p>
<h2 id='additional-information' class='heading'>Additional Information</h2>
<h3 id='acknowledgement' class='heading'>Acknowledgement</h3>

<p>SPPermissions is in large a SwiftUI remake of famous Swift library <strong><a href="https://github.com/varabeis/SPPermissions">SPPermissions</a></strong> by @verabeis. SPPermissions was initially created in 2017, and today on GitHub has over 4000 stars. PermissionsSwiftUI aims to deliver a just as beautiful and powerful library in SwiftUI. If you <code>star ‚òÖ</code> my project PermissionsSwiftUI, be sure to checkout the original project SPPermissions where I borrowed the UI Design, some parts of README.md page, and important source code references along the way.</p>
<h3 id='license' class='heading'>License</h3>

<p>PermissionsSwiftUI is created by Jingwen (Jevon) Mao and licensed under the <a href="https://jingwen-mao.mit-license.org">MIT License</a></p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2021 <a class="link" href="https://jingwen-mao.mit-license.org/" target="_blank" rel="noopener" rel="external">Jevon Mao</a>. All rights reserved. (Last updated: 2021-09-03)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="noopener" rel="external">jazzy ‚ô™‚ô´ v0.14.0</a>, a <a class="link" href="https://realm.io" target="_blank" rel="noopener" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
